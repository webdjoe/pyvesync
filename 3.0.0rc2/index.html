
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://pyvesync.github.io/latest/">
      
      
      
        <link rel="next" href="supported_devices/">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19">
    
    
      
        <title>pyvesync</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="stylesheets/common.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pyvesync-library" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="pyvesync" class="md-header__button md-logo" aria-label="pyvesync" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M515.9 240H496v144c0 35.3-28.7 64-64 64H295c-24-91.7-93.5-165-183-194.3V240H92.1C76.6 240 64 227.4 64 211.9c0-7.6 3.1-14.9 8.6-20.2L276.5-4.9C283.9-12 293.7-16 304-16s20.1 4 27.5 11.1l203.9 196.6c5.5 5.3 8.6 12.6 8.6 20.2 0 15.5-12.6 28.1-28.1 28.1M280 192c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24zM24 288c128.1 0 232 103.9 232 232 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-101.6-82.4-184-184-184-13.3 0-24-10.7-24-24s10.7-24 24-24m8 192a32 32 0 1 1 0 64 32 32 0 1 1 0-64M0 408c0-13.3 10.7-24 24-24 75.1 0 136 60.9 136 136 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-48.6-39.4-88-88-88-13.3 0-24-10.7-24-24"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            pyvesync
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Home
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/webdjoe/pyvesync" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    webdjoe/pyvesync
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="pyvesync" class="md-nav__button md-logo" aria-label="pyvesync" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M515.9 240H496v144c0 35.3-28.7 64-64 64H295c-24-91.7-93.5-165-183-194.3V240H92.1C76.6 240 64 227.4 64 211.9c0-7.6 3.1-14.9 8.6-20.2L276.5-4.9C283.9-12 293.7-16 304-16s20.1 4 27.5 11.1l203.9 196.6c5.5 5.3 8.6 12.6 8.6 20.2 0 15.5-12.6 28.1-28.1 28.1M280 192c-13.3 0-24 10.7-24 24v48c0 13.3 10.7 24 24 24h48c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24zM24 288c128.1 0 232 103.9 232 232 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-101.6-82.4-184-184-184-13.3 0-24-10.7-24-24s10.7-24 24-24m8 192a32 32 0 1 1 0 64 32 32 0 1 1 0-64M0 408c0-13.3 10.7-24 24-24 75.1 0 136 60.9 136 136 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-48.6-39.4-88-88-88-13.3 0-24-10.7-24-24"/></svg>

    </a>
    pyvesync
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/webdjoe/pyvesync" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    webdjoe/pyvesync
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#supported-devices" class="md-nav__link">
    <span class="md-ellipsis">
      Supported devices
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-new" class="md-nav__link">
    <span class="md-ellipsis">
      What's New
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#questions-or-help" class="md-nav__link">
    <span class="md-ellipsis">
      Questions or Help?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Questions or Help?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-devices" class="md-nav__link">
    <span class="md-ellipsis">
      New Devices
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-usage" class="md-nav__link">
    <span class="md-ellipsis">
      General Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="General Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vesync-manager" class="md-nav__link">
    <span class="md-ellipsis">
      VeSync Manager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-and-getting-help" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging and Getting Help
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#device-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Device Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#device-state" class="md-nav__link">
    <span class="md-ellipsis">
      Device State
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serializingdeserializing-devices-and-state" class="md-nav__link">
    <span class="md-ellipsis">
      Serializing/Deserializing devices and state
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Exceptions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development" class="md-nav__link">
    <span class="md-ellipsis">
      Development
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="supported_devices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Supported Devices
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="pyvesync3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    pyvesync V3
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="development/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="development/vesync_api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VeSync API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="development/data_models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="development/device_map/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DeviceMap
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="development/device_container/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    DeviceContainer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="development/vesync_device_base/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VeSyncDevice Base
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="development/constants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Constants
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="development/contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="development/testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10" >
        
          
          <label class="md-nav__link" for="__nav_5_10" id="__nav_5_10_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10">
            <span class="md-nav__icon md-icon"></span>
            Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="development/utils/helpers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Helpers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="development/utils/colors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Colors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="development/utils/device_mixins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Device Mixins
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="development/utils/errors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Errors & Exceptions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="development/utils/logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="devices/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Devices
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Devices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devices/outlets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Outlets
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devices/switches/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Switches
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devices/bulbs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bulbs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devices/air_purifiers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Air Purifiers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devices/humidifiers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Humidifiers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devices/fans/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fans
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devices/kitchen/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Air Fryers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="devices/thermostats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Thermostats
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#supported-devices" class="md-nav__link">
    <span class="md-ellipsis">
      Supported devices
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-new" class="md-nav__link">
    <span class="md-ellipsis">
      What's New
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#questions-or-help" class="md-nav__link">
    <span class="md-ellipsis">
      Questions or Help?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Questions or Help?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-devices" class="md-nav__link">
    <span class="md-ellipsis">
      New Devices
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-usage" class="md-nav__link">
    <span class="md-ellipsis">
      General Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="General Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vesync-manager" class="md-nav__link">
    <span class="md-ellipsis">
      VeSync Manager
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugging-and-getting-help" class="md-nav__link">
    <span class="md-ellipsis">
      Debugging and Getting Help
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#device-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Device Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#device-state" class="md-nav__link">
    <span class="md-ellipsis">
      Device State
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#serializingdeserializing-devices-and-state" class="md-nav__link">
    <span class="md-ellipsis">
      Serializing/Deserializing devices and state
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      Custom Exceptions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development" class="md-nav__link">
    <span class="md-ellipsis">
      Development
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="pyvesync-library">pyvesync Library<a class="toc-permalink" href="#pyvesync-library" title="Permanent link">â†²</a></h1>
<p><a href="https://pypi.python.org/pypi/pyvesync"><img alt="build status" src="https://img.shields.io/pypi/v/pyvesync.svg" /></a> <a href="https://dev.azure.com/webdjoe/pyvesync/_build/latest?definitionId=4&amp;branchName=master"><img alt="Build Status" src="https://dev.azure.com/webdjoe/pyvesync/_apis/build/status/webdjoe.pyvesync?branchName=master" /></a> <a href="https://github.com/Naereen/badges/"><img alt="Open Source? Yes!" src="https://badgen.net/badge/Open%20Source%20%3F/Yes%21/blue?icon=github" /></a> <a href="https://pypi.python.org/pypi/ansicolortags/"><img alt="PyPI license" src="https://img.shields.io/pypi/l/ansicolortags.svg" /></a> <!-- omit in toc --></p>
<p><strong>This is a work in progress, PR's greatly appreciated ðŸ™‚.</strong></p>
<p>pyvesync is a python library that interacts with devices that are connected to the VeSync app. The library can pull state details and perform actions to devices once they are set up in the app. This is not a local connection, the pyvesync library connects the VeSync cloud API, which reads and sends commands to the device, so internet access is required for both the device and library. There is no current method to control locally.</p>
<h2 id="supported-devices">Supported devices<a class="toc-permalink" href="#supported-devices" title="Permanent link">â†²</a></h2>
<p>The following product types are supported:</p>
<ol type="1">
<li><code>outlet</code> - Outlet devices</li>
<li><code>switch</code> - Wall switches</li>
<li><code>fan</code> - Fans (not air purifiers or humidifiers)</li>
<li><code>purifier</code> - Air purifiers (not humidifiers)</li>
<li><code>humidifier</code> - Humidifiers (not air purifiers)</li>
<li><code>bulb</code> - Light bulbs (not dimmers or switches)</li>
<li><code>airfryer</code> - Air fryers</li>
</ol>
<p>See <a href="supported_devices/">Supported Devices</a> for a complete list of supported devices and models.</p>
<h2 id="whats-new">What's New<a class="toc-permalink" href="#whats-new" title="Permanent link">â†²</a></h2>
<p><strong>BREAKING CHANGES</strong> - The release of pyvesync 3.0 comes with many improvements and new features, but as a result there are many breaking changes. The structure has been completely refactored, so please read through the documentation and thoroughly test before deploying.</p>
<p>The goal is to standardize the library across all devices to allow easier and consistent maintainability moving forward. The original library was created 8 years ago for supporting only a few outlets, it was not designed for supporting 20+ different devices.</p>
<p>This will <strong>DEFINITELY</strong> cause breaking changes with existing code, but the new structure should be easier to work with and more consistent across all devices in the future.</p>
<p>Some of the major structural changes include:</p>
<ul>
<li>Asynchronous API calls through aiohttp</li>
<li><a class="autorefs autorefs-internal" title="pyvesync.device_container.DeviceContainer" href="development/device_container/#pyvesync.device_container.DeviceContainer"><code>DeviceContainer</code></a> object holds all devices in a mutable set structure with additional convenience methods and properties for managing devices. This is located in the <code>VeSync.manager</code> attribute.</li>
<li>Custom exceptions for better error handling there are custom exceptions that inherit from <a class="autorefs autorefs-internal" title="pyvesync.utils.errors.VeSyncError" href="development/utils/errors/#pyvesync.utils.errors.VeSyncError"><code>VeSyncError</code></a>, <code>VeSyncAPIError</code>, <code>VeSyncLoginError</code>, <code>VeSyncRateLimitError</code>.</li>
<li>Device state has been separated from the device object and is now managed by the device specific subclasses of <a class="autorefs autorefs-internal" title="DeviceState" href="development/vesync_device_base/#pyvesync.base_devices.vesyncbasedevice.DeviceState"><code>DeviceState</code></a>. The state object is located in the <code>state</code> attribute of the device object.</li>
<li>Device Classes have been refactored to be more consistent and easier to manage. No more random property and method names for different types of the same device.</li>
<li><a class="autorefs autorefs-internal" title="pyvesync.const" href="development/constants/#pyvesync.const"><code>const</code></a> module to hold all library constants.</li>
<li><a class="autorefs autorefs-internal" title="pyvesync.device_map" href="development/device_map/#pyvesync.device_map"><code>device_map</code></a> module holds all device type mappings and configuration.</li>
</ul>
<p>See <a href="pyvesync3/">pyvesync V3</a> for more details.</p>
<h2 id="questions-or-help">Questions or Help?<a class="toc-permalink" href="#questions-or-help" title="Permanent link">â†²</a></h2>
<p>If you have a bug or enhancement request for the pyvesync library, please submit an <a href="https://github.com/webdjoe/pyvesync/issues">issue</a>.</p>
<p>Looking to submit a request for a new device or have a general functionality question, check out <a href="https://github.com/webdjoe/pyvesync/discussions">discussions</a>.</p>
<p>For home assistant issues, please submit on that repository.</p>
<h3 id="new-devices">New Devices<a class="toc-permalink" href="#new-devices" title="Permanent link">â†²</a></h3>
<p>If you would like to add a new device, packet captures must be provided. The iOS and Android VeSync app implements certificate pinning to prevent standard MITM intercepts. Currently, the only known way is to patch the APK and run on a rooted android emulator with frida. This is a complex process that has had varying levels of success. If you successful in capturing packets, please capture all functionality, including the device list and configuraiton screen. Redact accountId and token keys or contact me for a more secure way to share.</p>
<h2 id="general-usage">General Usage<a class="toc-permalink" href="#general-usage" title="Permanent link">â†²</a></h2>
<p>The <a class="autorefs autorefs-internal" title="pyvesync.vesync.VeSync" href="development/vesync_api/#pyvesync.vesync.VeSync"><code>pyvesync.vesync.VeSync</code></a> object is the primary class that is referred to as the <code>manager</code> because it provides all the methods and properties to control the library. This should be the only class that is directly instantiated. All devices will be instantiated and managed by the <code>VeSync</code> object.</p>
<p>See the <a href="usage/">Usage</a> documentation for a quick start guide on how to use the library.</p>
<h3 id="vesync-manager">VeSync Manager<a class="toc-permalink" href="#vesync-manager" title="Permanent link">â†²</a></h3>
<p>The <code>VeSync</code> class has the following parameters, <code>username</code> and <code>password</code> are mandatory:</p>
<p><strong>BREAKING CHANGE</strong> The VeSync object is now an asynchronous context manager, so it must be used with <code>async with</code>. The debug and redact argument have also been removed. To enable debug logging, set <code>manager.debug = True</code> and redacting by <code>manager.redact = True</code> to the instantiated object.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pyvesync</span><span class="w"> </span><span class="kn">import</span> <span class="n">VeSync</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="c1"># debug and redact are optional arguments, the above values are</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1"># the defaults. The library will try to automatically pull in</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="c1"># the correct time zone from the API responses.</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>    <span class="k">async</span> <span class="k">with</span> <span class="n">VeSync</span><span class="p">(</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>        <span class="n">username</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>        <span class="n">password</span><span class="o">=</span><span class="s2">&quot;password&quot;</span><span class="p">,</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>        <span class="n">country_code</span><span class="o">=</span><span class="s2">&quot;US&quot;</span><span class="p">,</span>  <span class="c1"># Optional - country Code to select correct server</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>        <span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">,</span>  <span class="c1"># Optional - aiohttp.ClientSession</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>        <span class="n">time_zone</span><span class="o">=</span><span class="s2">&quot;America/New_York&quot;</span><span class="p">,</span>  <span class="c1"># Optional - Timezone, defaults to America/New_York</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>        <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>  <span class="c1"># Optional - Debug output</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>        <span class="n">redact</span><span class="o">=</span><span class="kc">True</span>  <span class="c1"># Optional - Redact sensitive information from logs</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>        <span class="p">)</span> <span class="k">as</span> <span class="n">manager</span><span class="p">:</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>    <span class="c1"># VeSync object is now instantiated</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a>    <span class="k">await</span> <span class="n">manager</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>    <span class="c1"># Check if logged in</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a>    <span class="k">assert</span> <span class="n">manager</span><span class="o">.</span><span class="n">enabled</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>    <span class="c1"># Debug and Redact are optional arguments</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>    <span class="n">manager</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a>    <span class="n">manager</span><span class="o">.</span><span class="n">redact</span> <span class="o">=</span> <span class="kc">True</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>    <span class="c1"># Get devices</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>    <span class="k">await</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_devices</span><span class="p">()</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>    <span class="c1"># Device objects are now instantiated, but do not have state</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a>    <span class="k">await</span> <span class="n">manager</span><span class="o">.</span><span class="n">update</span><span class="p">()</span> <span class="c1"># Pulls in state and updates all devices</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>    <span class="c1"># Or iterate through devices and update individually</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a>    <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">manager</span><span class="o">.</span><span class="n">outlets</span><span class="p">:</span>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a>        <span class="k">await</span> <span class="n">device</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a>    <span class="c1"># Or update a product type of devices:</span>
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>    <span class="k">for</span> <span class="n">outlet</span> <span class="ow">in</span> <span class="n">manager</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">outlets</span><span class="p">:</span>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a>        <span class="k">await</span> <span class="n">outlet</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</code></pre></div>
<p>Once logged in, the next call should be to the <code>update()</code> method which:</p>
<ul>
<li>Retrieves list of devices from server</li>
<li>Removes stale devices that are not present in the new API call</li>
<li>Adds new devices to the device list attributes</li>
<li>Instantiates all device classes</li>
<li>Updates all devices via the device instance <code>update()</code> method</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># Get/Update Devices from server - populate device lists</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">manager</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="c1"># Device instances are now located in the devices attribute:</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="n">devices</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">devices</span>  <span class="c1"># Mutable set-like class</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="c1"># The entire container can be iterated over:</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="n">manager</span><span class="o">.</span><span class="n">devices</span><span class="p">:</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="c1"># Or iterate over specific device types:</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="k">for</span> <span class="n">outlet</span> <span class="ow">in</span> <span class="n">manager</span><span class="o">.</span><span class="n">outlets</span><span class="p">:</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">outlet</span><span class="p">)</span>
</code></pre></div>
<p>Updating all devices without pulling a device list:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">manager</span><span class="o">.</span><span class="n">update_all_devices</span><span class="p">()</span>
</code></pre></div>
<p>Each product type is a property in the <code>devices</code> attribute:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">manager</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">outlets</span> <span class="o">=</span> <span class="p">[</span><span class="n">VeSyncOutletInstances</span><span class="p">]</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">manager</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">switches</span> <span class="o">=</span> <span class="p">[</span><span class="n">VeSyncSwitchInstances</span><span class="p">]</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="n">manager</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">fans</span> <span class="o">=</span> <span class="p">[</span><span class="n">VeSyncFanInstances</span><span class="p">]</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="n">manager</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">bulbs</span> <span class="o">=</span> <span class="p">[</span><span class="n">VeSyncBulbInstances</span><span class="p">]</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="n">manager</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">purifiers</span> <span class="o">=</span> <span class="p">[</span><span class="n">VeSyncPurifierInstances</span><span class="p">]</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="n">manager</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">humidifiers</span> <span class="o">=</span> <span class="p">[</span><span class="n">VeSyncHumidifierInstances</span><span class="p">]</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="n">manager</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">air_fryers</span> <span class="o">=</span> <span class="p">[</span><span class="n">VeSyncAirFryerInstances</span><span class="p">]</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="n">managers</span><span class="o">.</span><span class="n">devices</span><span class="o">.</span><span class="n">thermostats</span> <span class="o">=</span> <span class="p">[</span><span class="n">VeSyncThermostatInstances</span><span class="p">]</span>
</code></pre></div>
<h3 id="debugging-and-getting-help">Debugging and Getting Help<a class="toc-permalink" href="#debugging-and-getting-help" title="Permanent link">â†²</a></h3>
<p>The library has built-in debug logging that can be enabled by setting the <code>debug</code> attribute of the <code>VeSync</code> object to <code>True</code>. This will log the API calls and response codes to the console. This will not log the actual API calls.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pyvesync</span><span class="w"> </span><span class="kn">import</span> <span class="n">VeSync</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="k">async</span> <span class="k">with</span> <span class="n">VeSync</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;EMAIL&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;PASSWORD&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">manager</span><span class="p">:</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    <span class="n">manager</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Enable debug logging</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>    <span class="k">await</span> <span class="n">manager</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>    <span class="k">await</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_devices</span><span class="p">()</span>
</code></pre></div>
<p>To log the full API request and response, set the <code>verbose</code> attribute to <code>True</code>. This will log the full request and response, including headers and body. This is useful for debugging issues with the API calls. Setting the <code>redact</code> attribute to <code>False</code> will not redact the sensitive information in the logs, such as the username and password. <code>redact</code> is <code>True</code> by default.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pyvesync</span><span class="w"> </span><span class="kn">import</span> <span class="n">VeSync</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="k">async</span> <span class="k">with</span> <span class="n">VeSync</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;EMAIL&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;PASSWORD&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">manager</span><span class="p">:</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    <span class="n">manager</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Enable debug logging</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>    <span class="n">manager</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Enable verbose logging</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>    <span class="k">await</span> <span class="n">manager</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>    <span class="k">await</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_devices</span><span class="p">()</span>
</code></pre></div>
<p>Since verbose debugging can output a lot of information, there is a helper function to log to a file instead of the console.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">pyvesync</span><span class="w"> </span><span class="kn">import</span> <span class="n">VeSync</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="k">async</span> <span class="k">with</span> <span class="n">VeSync</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s2">&quot;EMAIL&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;PASSWORD&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">manager</span><span class="p">:</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>    <span class="n">manager</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Enable debug logging</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>    <span class="n">manager</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Enable verbose logging</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>    <span class="k">await</span> <span class="n">manager</span><span class="o">.</span><span class="n">log_to_file</span><span class="p">(</span><span class="s2">&quot;debug.log&quot;</span><span class="p">)</span>  <span class="c1"># Can be an absolute or path relative to the current working directory</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>    <span class="k">await</span> <span class="n">manager</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>    <span class="k">await</span> <span class="n">manager</span><span class="o">.</span><span class="n">get_devices</span><span class="p">()</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>    <span class="c1"># Log to a file instead of the console</span>
</code></pre></div>
<h3 id="device-usage">Device Usage<a class="toc-permalink" href="#device-usage" title="Permanent link">â†²</a></h3>
<p>Devices and their attributes and methods can be accessed via the device lists in the manager instance.</p>
<p>One device is simple to access, an outlet for example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="k">for</span> <span class="n">devices</span> <span class="ow">in</span> <span class="n">manager</span><span class="o">.</span><span class="n">outlets</span><span class="p">:</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">outlet</span><span class="p">)</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">outlet</span><span class="o">.</span><span class="n">device_name</span><span class="p">)</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">outlet</span><span class="o">.</span><span class="n">device_type</span><span class="p">)</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">outlet</span><span class="o">.</span><span class="n">sub_device_no</span><span class="p">)</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">outlet</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>
</code></pre></div>
<p>The last response information is stored in the <code>last_response</code> attribute of the device and returns the <a class="autorefs autorefs-internal" title="pyvesync.utils.errors.ResponseInfo


  
      dataclass
  " href="development/utils/errors/#pyvesync.utils.errors.ResponseInfo"><code>ResponseInfo</code></a> object.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1"># Get the last response information</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">outlet</span><span class="o">.</span><span class="n">last_response</span><span class="p">)</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="n">ResponseInfo</span><span class="p">(</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>    <span class="n">error_name</span><span class="o">=</span><span class="s2">&quot;SUCCESS&quot;</span><span class="p">,</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>    <span class="n">error_type</span><span class="o">=</span><span class="n">SUCCESS</span><span class="p">,</span>  <span class="c1"># StrEnum from ErrorTypes class</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>    <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Success&quot;</span><span class="p">,</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a>    <span class="n">critical_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>    <span class="n">operational_error</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>    <span class="n">device_online</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="p">)</span>
</code></pre></div>
<h3 id="device-state">Device State<a class="toc-permalink" href="#device-state" title="Permanent link">â†²</a></h3>
<p>All device state information is stored in a separate object in the <code>device.state</code> attribute. Each device has it's own state class that inherits from the <code>pyvesync.base_devices.vesyncbasedevice.DeviceState</code> class. The state object is updated when the device is updated, so it will always be the most recent state of the device. Each product type has it's own state class that hold all available attribute for every device type supported for that product type. For example, purifiers have the <code>PurifierState</code> class, which holds all attributes, some of which may not be supported by all devices.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nb">print</span><span class="p">(</span><span class="n">outlet</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">device_status</span><span class="p">)</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">DeviceStatus</span><span class="o">.</span><span class="n">ON</span>  <span class="c1"># StrEnum representing the &quot;on&quot; state</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="nb">print</span><span class="p">(</span><span class="n">outlet</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">connection_status</span><span class="p">)</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="n">ConnectionStatus</span><span class="o">.</span><span class="n">ONLINE</span>  <span class="c1"># StrEnum representing the &quot;online&quot; state</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="nb">print</span><span class="p">(</span><span class="n">outlet</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">voltage</span><span class="p">)</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="mf">120.0</span>  <span class="c1"># Voltage of the device</span>
</code></pre></div>
<p>For a full listing of available device attributes and methods, see the individual device documentation:</p>
<ol type="1">
<li><a href="devices/outlets/">Outlets</a></li>
<li><a href="devices/bulbs/">Bulbs</a></li>
<li><a href="devices/switches/">Switches</a></li>
<li><a href="devices/air_purifiers/">Purifiers</a></li>
<li><a href="devices/humidifiers/">Humidifiers</a></li>
<li><a href="devices/fans/">Fans</a></li>
<li><a href="devices/kitchen/">Air Fryers</a></li>
<li><a href="devices/thermostats/">Thermostats</a></li>
</ol>
<h2 id="serializingdeserializing-devices-and-state">Serializing/Deserializing devices and state<a class="toc-permalink" href="#serializingdeserializing-devices-and-state" title="Permanent link">â†²</a></h2>
<p>All devices have the <code>to_json()</code> and <code>to_jsonb()</code> methods which will serialize the device and state to a JSON string or binary json string.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">device</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">outlets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="nb">print</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>  <span class="c1"># JSON string</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="c1"># Setting `state=False` will only serialize the attributes in the device class and not the state class</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="nb">print</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">to_jsonb</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>  <span class="c1"># Binary JSON string</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="c1"># State classes also have the `to_json()` and `to_jsonb()` methods but this does not include any device information, such as device_name, device_type, etc.</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="nb">print</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">indent</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>  <span class="c1"># JSON string</span>
</code></pre></div>
<p>Devices and state objects can also output to a dictionary using the <code>to_dict()</code> method or as a list of tuples with <code>as_tuple()</code>. This is useful for logging or debugging.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="n">device</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="n">outlets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="n">dev_dict</span> <span class="o">=</span> <span class="n">device</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>  <span class="c1"># Dictionary of device and state attributes</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="n">dev_dict</span><span class="p">[</span><span class="s2">&quot;device_name&quot;</span><span class="p">]</span>  <span class="c1"># Get the device name from the dictionary</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="n">dev_dict</span><span class="p">[</span><span class="s2">&quot;device_status&quot;</span><span class="p">]</span> <span class="c1"># Returns device status as a StrEnum</span>
</code></pre></div>
<h2 id="custom-exceptions">Custom Exceptions<a class="toc-permalink" href="#custom-exceptions" title="Permanent link">â†²</a></h2>
<p>Exceptions are no longer caught by the library and must be handled by the user. Exceptions are raised by server errors and aiohttp connection errors.</p>
<p>Errors that occur at the aiohttp level are raised automatically and propogated to the user. That means exceptions raised by aiohttp that inherit from <code>aiohttp.ClientError</code> are propogated.</p>
<p>When the connection to the VeSync API succeeds but returns an error code that prevents the library from functioning a custom exception inherrited from <code>pyvesync.logs.VeSyncError</code> is raised.</p>
<p>Custom Exceptions raised by all API calls:</p>
<ul>
<li><code>pyvesync.logs.VeSyncServerError</code> - The API connected and returned a code indicated there is a server-side error.</li>
<li><code>pyvesync.logs.VeSyncRateLimitError</code> - The API's rate limit has been exceeded.</li>
<li><code>pyvesync.logs.VeSyncAPIStatusCodeError</code> - The API returned a non-200 status code.</li>
<li><code>pyvesync.logs.VeSyncAPIResponseError</code> - The response from the API was not in an expected format.</li>
</ul>
<p>Login API Exceptions</p>
<ul>
<li><code>pyvesync.logs.VeSyncLoginError</code> - The username or password is incorrect.</li>
</ul>
<p>See <a href="https://webdjoe.github.io/pyvesync/latest/development/utils/errors">errors</a> documentation for a complete list of error codes and exceptions.</p>
<p>The <a href="https://webdjoe.github.io/pyvesync/latest/development/utils/errors/#pyvesync.utils.errors.raise_api_errors">raise_api_errors()</a> function is called for every API call and checks for general response errors. It can raise the following exceptions:</p>
<ul>
<li><code>VeSyncServerError</code> - The API connected and returned a code indicated there is a server-side error.</li>
<li><code>VeSyncRateLimitError</code> - The API's rate limit has been exceeded.</li>
<li><code>VeSyncAPIStatusCodeError</code> - The API returned a non-200 status code.</li>
<li><code>VeSyncTokenError</code> - The API returned a token error and requires <code>login()</code> to be called again.</li>
<li><code>VeSyncLoginError</code> - The user name or password is incorrect.</li>
</ul>
<h2 id="development">Development<a class="toc-permalink" href="#development" title="Permanent link">â†²</a></h2>
<p>For details on the structure and architecture of the library, see the <a href="development/">Development</a> documentation.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": ["search.suggest", "navigation.indexes", "search.highlight", "toc.follow", "navigation.top"], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "default": "latest", "provider": "mike"}}</script>
    
    
      <script src="assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>